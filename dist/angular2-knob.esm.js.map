{"version":3,"file":"angular2-knob.esm.js","sources":["../src/angular2-knob.directive.ts","../src/angular2-knob.module.ts"],"sourcesContent":["import {Directive, ElementRef, OnInit, Input, Output, EventEmitter} from '@angular/core';\r\nimport * as d3 from 'd3';\r\nimport 'd3-selection-multi';\r\n\r\nexport interface Options {\r\n  skin?: {\r\n    type: string;\r\n    width: number;\r\n    color: string;\r\n    spaceWidth: number;\r\n  },\r\n  animate?: {\r\n    enabled: true,\r\n    duration: number;\r\n    ease: string;\r\n  },\r\n  size: number;\r\n  startAngle: number;\r\n  endAngle: number;\r\n  unit: string;\r\n  displayInput: true,\r\n  inputFormatter: any;\r\n  readOnly: boolean;\r\n  trackWidth: number;\r\n  barWidth: number;\r\n  trackColor: string;\r\n  barColor: string;\r\n  prevBarColor: string;\r\n  textColor: string;\r\n  barCap: number;\r\n  trackCap: number;\r\n  fontSize: string;\r\n  fontWeigth: string;\r\n  fontFamily: string;\r\n  subText: {\r\n    enabled: false,\r\n    text: '',\r\n    fontFamily: string;\r\n    fontWeight: string;\r\n    color: string;\r\n    font: string;\r\n    offset: number;\r\n  },\r\n  bgColor: string;\r\n  bgFull: false,\r\n  scale: {\r\n    enabled: false,\r\n    type: string;\r\n    color: string;\r\n    width: number;\r\n    quantity: number;\r\n    height: number;\r\n    spaceWidth: number;\r\n  },\r\n  step: number;\r\n  displayPrevious: false,\r\n  min: number;\r\n  max: number;\r\n  dynamicOptions: false\r\n};\r\n\r\n@Directive({\r\n  selector: '[ui-knob]'\r\n})\r\nexport class Ng2KnobDirective implements OnInit {\r\n  element: HTMLElement;\r\n  @Input() value: number;\r\n  @Input() label: number;\r\n  @Input() options: any;\r\n  @Output() valueChange = new EventEmitter<number>();\r\n\r\n  inDrag: Boolean;\r\n  bgArc: any;\r\n  trackArc: any;\r\n  changeArc: any;\r\n  valueArc: any;\r\n  interactArc: any;\r\n  hoopArc: any;\r\n  changeElem: any;\r\n  valueElem: any;\r\n  defaultOptions: Options;\r\n  animations: any;\r\n\r\n  constructor(private el: ElementRef) {\r\n\r\n    // All that need to be instanciated before bindings\r\n    this.element = this.el.nativeElement;\r\n    this.value = 0;\r\n    this.defaultOptions = {\r\n      skin: {\r\n        type: 'simple',\r\n        width: 10,\r\n        color: 'rgba(255,0,0,.5)',\r\n        spaceWidth: 5\r\n      },\r\n      animate: {\r\n        enabled: true,\r\n        duration: 1000,\r\n        ease: 'bounce'\r\n      },\r\n      size: 200,\r\n      startAngle: 0,\r\n      endAngle: 360,\r\n      unit: '',\r\n      displayInput: true,\r\n      inputFormatter: function (v: any) { return v; },\r\n      readOnly: false,\r\n      trackWidth: 50,\r\n      barWidth: 50,\r\n      trackColor: 'rgba(0,0,0,0)',\r\n      barColor: 'rgba(255,0,0,.5)',\r\n      prevBarColor: 'rgba(0,0,0,0)',\r\n      textColor: '#222',\r\n      barCap: 0,\r\n      trackCap: 0,\r\n      fontSize: 'auto',\r\n      fontWeigth: '400',\r\n      fontFamily: 'Arial',\r\n      subText: {\r\n        enabled: false,\r\n        text: '',\r\n        fontFamily: 'Arial',\r\n        fontWeight: 'normal',\r\n        color: 'gray',\r\n        font: 'auto',\r\n        offset: 0\r\n      },\r\n      bgColor: '',\r\n      bgFull: false,\r\n      scale: {\r\n        enabled: false,\r\n        type: 'lines',\r\n        color: 'gray',\r\n        width: 4,\r\n        quantity: 20,\r\n        height: 10,\r\n        spaceWidth: 15\r\n      },\r\n      step: 1,\r\n      displayPrevious: false,\r\n      min: 0,\r\n      max: 100,\r\n      dynamicOptions: false\r\n    };\r\n\r\n    this.animations = {\r\n      linear: d3.easeLinear,\r\n      bounce: d3.easeBounce\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Implement this interface to execute custom initialization logic after your directive's data-bound properties have been initialized.\r\n   * ngOnInit is called right after the directive's data-bound properties have been checked for the first time, and before any of its children have been checked.\r\n   * It is invoked only once when the directive is instantiated.\r\n   */\r\n  ngOnInit() {\r\n    this.inDrag = false;\r\n    this.options = (<any>Object).assign(this.defaultOptions, this.options);\r\n    this.draw();\r\n  }\r\n\r\n  /**\r\n   * Actions when value or options change in host component\r\n   */\r\n  ngOnChanges(changes:any) {\r\n\r\n    if (this.defaultOptions != null && changes.options != null && changes.options.currentValue != null && this.value != null) {\r\n      this.options = (<any>Object).assign(this.defaultOptions, changes.options.currentValue);\r\n      this.draw();\r\n    }\r\n\r\n    if (this.defaultOptions != null && this.options != null && changes.value && changes.value.currentValue != null && changes.value.previousValue != null && changes.value.currentValue !== changes.value.previousValue) {\r\n      this.setValue(changes.value.currentValue);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *   Convert from value to radians\r\n   */\r\n  valueToRadians(value: number, valueEnd: number, angleEnd: number = 0, angleStart: number = 0, valueStart: number = 0) {\r\n    valueEnd = valueEnd || 100;\r\n    valueStart = valueStart || 0;\r\n    angleEnd = angleEnd || 360;\r\n    angleStart = angleStart || 0;\r\n    return (Math.PI / 180) * ((((value - valueStart) * (angleEnd - angleStart)) / (valueEnd - valueStart)) + angleStart);\r\n  }\r\n  /**\r\n   *   Convert from radians to value\r\n   */\r\n  radiansToValue(radians: number, valueEnd: number, valueStart: number, angleEnd: number, angleStart: number) {\r\n    valueEnd = valueEnd || 100;\r\n    valueStart = valueStart || 0;\r\n    angleEnd = angleEnd || 360;\r\n    angleStart = angleStart || 0;\r\n    return ((((((180 / Math.PI) * radians) - angleStart) * (valueEnd - valueStart)) / (angleEnd - angleStart)) + valueStart);\r\n  }\r\n  /**\r\n   *   Create the arc\r\n   */\r\n  createArc(innerRadius: number, outerRadius: number, startAngle?: number, endAngle?: number, cornerRadius?: number): any {\r\n    const arc = d3.arc()\r\n      .innerRadius(innerRadius)\r\n      .outerRadius(outerRadius)\r\n      .startAngle(startAngle)\r\n      .endAngle(endAngle)\r\n      .cornerRadius(cornerRadius);\r\n    return arc;\r\n  }\r\n  /**\r\n   *   Draw the arc\r\n   */\r\n  drawArc(svg: any, arc: any, label: string, style: any, click?: any, drag?: any) {\r\n    const elem = svg.append('path')\r\n      .attr('id', label)\r\n      .attr('d', arc);\r\n\r\n    for (const key in style) {\r\n      elem.style(key, style[key]);\r\n    }\r\n\r\n    elem.attr('transform', 'translate(' + (this.options.size / 2) + ', ' + (this.options.size / 2) + ')');\r\n\r\n    if (this.options.readOnly === false) {\r\n      if (click) {\r\n        elem.on('click', click);\r\n      }\r\n      if (drag) {\r\n        elem.call(drag);\r\n      }\r\n    }\r\n    return elem;\r\n  }\r\n  /**\r\n   *   Create the arcs\r\n   */\r\n  createArcs() {\r\n    let outerRadius = parseInt((this.options.size / 2).toString(), 10);\r\n    const startAngle = this.valueToRadians(this.options.startAngle, 360);\r\n    const endAngle = this.valueToRadians(this.options.endAngle, 360);\r\n    if (this.options.scale.enabled) {\r\n      outerRadius -= this.options.scale.width + this.options.scale.spaceWidth;\r\n    }\r\n    let trackInnerRadius = outerRadius - this.options.trackWidth;\r\n    let changeInnerRadius = outerRadius - this.options.barWidth;\r\n    let valueInnerRadius = outerRadius - this.options.barWidth;\r\n      // interactInnerRadius = outerRadius - this.options.barWidth,\r\n    const interactInnerRadius = 1;\r\n\r\n    let trackOuterRadius = outerRadius;\r\n    let changeOuterRadius = outerRadius;\r\n    let valueOuterRadius = outerRadius;\r\n    let interactOuterRadius = outerRadius;\r\n    let diff;\r\n\r\n    if (this.options.barWidth > this.options.trackWidth) {\r\n      diff = (this.options.barWidth - this.options.trackWidth) / 2;\r\n      trackInnerRadius -= diff;\r\n      trackOuterRadius -= diff;\r\n    } else if (this.options.barWidth < this.options.trackWidth) {\r\n      diff = (this.options.trackWidth - this.options.barWidth) / 2;\r\n      changeOuterRadius -= diff;\r\n      valueOuterRadius -= diff;\r\n      changeInnerRadius -= diff;\r\n      valueInnerRadius -= diff;\r\n      // interactInnerRadius = outerRadius - this.options.trackWidth;\r\n    }\r\n    if (this.options.bgColor) {\r\n      if (this.options.bgFull) {\r\n        this.bgArc = this.createArc(0, outerRadius, 0, Math.PI * 2);\r\n      } else {\r\n        this.bgArc = this.createArc(0, outerRadius, startAngle, endAngle);\r\n      }\r\n    }\r\n    if (this.options.skin.type === 'tron') {\r\n      trackOuterRadius = trackOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\r\n      changeOuterRadius = changeOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\r\n      valueOuterRadius = valueOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\r\n      interactOuterRadius = interactOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\r\n      this.hoopArc = this.createArc(outerRadius - this.options.skin.width, outerRadius, startAngle, endAngle);\r\n    }\r\n\r\n    this.trackArc = this.createArc(trackInnerRadius, trackOuterRadius, startAngle, endAngle, this.options.trackCap);\r\n    this.changeArc = this.createArc(changeInnerRadius, changeOuterRadius, startAngle, startAngle, this.options.barCap);\r\n    this.valueArc = this.createArc(valueInnerRadius, valueOuterRadius, startAngle, startAngle, this.options.barCap);\r\n    this.interactArc = this.createArc(interactInnerRadius, interactOuterRadius, startAngle, endAngle);\r\n  }\r\n  /**\r\n   *   Draw the arcs\r\n   */\r\n  drawArcs(clickInteraction: any, dragBehavior: any) {\r\n    const svg = d3.select(this.element)\r\n      .append('svg')\r\n      .attr('width', this.options.size)\r\n      .attr('height', this.options.size);\r\n\r\n    if (this.options.bgColor) {\r\n      this.drawArc(svg, this.bgArc, 'bgArc', { 'fill': this.options.bgColor });\r\n    }\r\n\r\n    if (this.options.displayInput) {\r\n      let fontSize: string = (this.options.size * 0.20) + 'px';\r\n      if (this.options.fontSize !== 'auto') {\r\n        fontSize = this.options.fontSize + 'px';\r\n      }\r\n      if (this.options.step < 1) {\r\n        this.value = Number(this.value.toFixed(1));\r\n      }\r\n      let v = this.label || this.value;\r\n      if (typeof this.options.inputFormatter === 'function') {\r\n        v = this.options.inputFormatter(v);\r\n      }\r\n      let fontFamily: string = '';\r\n      if (this.options.fontFamily !== 'Arial') {\r\n        fontFamily = this.options.fontFamily;\r\n      }\r\n       let fontWeigth: string = '';\r\n      if (this.options.fontWeigth !== '400') {\r\n        fontWeigth = this.options.fontWeigth;\r\n      }\r\n      svg.append('text')\r\n        .attr('id', 'text')\r\n        .attr('class', 'text-value')\r\n        .attr('text-anchor', 'middle')\r\n        .attr('font-size', fontSize)\r\n        .attr('font-weight', fontWeigth)\r\n        .attr('font-family', fontFamily)\r\n        .style('fill', this.options.textColor)\r\n        .text(v + this.options.unit || '')\r\n        .attr('transform', 'translate(' + ((this.options.size / 2)) + ', ' + ((this.options.size / 2) + (this.options.size * 0.06)) + ')');\r\n\r\n      if (this.options.subText.enabled) {\r\n        fontSize = (this.options.size * 0.07) + 'px';\r\n        if (this.options.subText.font !== 'auto') {\r\n          fontSize = this.options.subText.font + 'px';\r\n        }\r\n        let fontFamily = '';\r\n        if (this.options.subText.fontFamily !== 'Arial') {\r\n          fontFamily = this.options.subText.fontFamily;\r\n        }\r\n        let fontWeight = '';\r\n        if (this.options.subText.fontWeight !== 'normal') {\r\n          fontWeight = this.options.subText.fontWeight;\r\n        }\r\n        svg.append('text')\r\n          .attr('class', 'sub-text')\r\n          .attr('text-anchor', 'middle')\r\n          .attr('font-size', fontSize)\r\n          .attr('font-family', fontFamily)\r\n          .attr('font-weight', fontWeight)\r\n          .style('fill', this.options.subText.color)\r\n          .text(this.options.subText.text)\r\n          .attr('transform', 'translate(' + ((this.options.size / 2)) + ', ' + ((this.options.size / 2) + (this.options.size * 0.15) + this.options.subText.offset) + ')');\r\n      }\r\n    }\r\n    if (this.options.scale.enabled) {\r\n      let radius: number;\r\n      let quantity: number;\r\n      let data;\r\n      let count: number = 0;\r\n      let angle: number = 0;\r\n      const startRadians = this.valueToRadians(this.options.min, this.options.max, this.options.endAngle, this.options.startAngle, this.options.min);\r\n      const endRadians = this.valueToRadians(this.options.max, this.options.max, this.options.endAngle, this.options.startAngle, this.options.min);\r\n      let diff = 0;\r\n      if (this.options.startAngle !== 0 || this.options.endAngle !== 360) {\r\n        diff = 1;\r\n      }\r\n      if (this.options.scale.type === 'dots') {\r\n        const width = this.options.scale.width;\r\n        radius = (this.options.size / 2) - width;\r\n        quantity = this.options.scale.quantity;\r\n        const offset: number = radius + this.options.scale.width;\r\n        data = d3.range(quantity).map(function () {\r\n          angle = (count * (endRadians - startRadians)) - (Math.PI / 2) + startRadians;\r\n          count = count + (1 / (quantity - diff));\r\n          return {\r\n            cx: offset + Math.cos(angle) * radius,\r\n            cy: offset + Math.sin(angle) * radius,\r\n            r: width\r\n          };\r\n        });\r\n        svg.selectAll('circle')\r\n          .data(data)\r\n          .enter().append('circle')\r\n          .attrs({\r\n            r: function (d: { r:any }) {\r\n              return d.r;\r\n            },\r\n            cx: function (d: { cx:number }) {\r\n              return d.cx;\r\n            },\r\n            cy: function (d: { cy:number }) {\r\n              return d.cy;\r\n            },\r\n            fill: this.options.scale.color\r\n          });\r\n      } else if (this.options.scale.type === 'lines') {\r\n        const height = this.options.scale.height;\r\n        radius = (this.options.size / 2);\r\n        quantity = this.options.scale.quantity;\r\n        data = d3.range(quantity).map(function () {\r\n          angle = (count * (endRadians - startRadians)) - (Math.PI / 2) + startRadians;\r\n          count = count + (1 / (quantity - diff));\r\n          return {\r\n            x1: radius + Math.cos(angle) * radius,\r\n            y1: radius + Math.sin(angle) * radius,\r\n            x2: radius + Math.cos(angle) * (radius - height),\r\n            y2: radius + Math.sin(angle) * (radius - height)\r\n          };\r\n        });\r\n        svg.selectAll('line')\r\n          .data(data)\r\n          .enter().append('line')\r\n          .attrs({\r\n            x1: function (d: { x1:number }) {\r\n              return d.x1;\r\n            },\r\n            y1: function (d: { y1:number }) {\r\n              return d.y1;\r\n            },\r\n            x2: function (d: { x2:number }) {\r\n              return d.x2;\r\n            },\r\n            y2: function (d: { y2:number }) {\r\n              return d.y2;\r\n            },\r\n            'stroke-width': this.options.scale.width,\r\n            'stroke': this.options.scale.color\r\n          });\r\n      }\r\n    }\r\n    if (this.options.skin.type === 'tron') {\r\n      this.drawArc(svg, this.hoopArc, 'hoopArc', { 'fill': this.options.skin.color });\r\n    }\r\n    this.drawArc(svg, this.trackArc, 'trackArc', { 'fill': this.options.trackColor });\r\n    if (this.options.displayPrevious) {\r\n      this.changeElem = this.drawArc(svg, this.changeArc, 'changeArc', { 'fill': this.options.prevBarColor });\r\n    } else {\r\n      this.changeElem = this.drawArc(svg, this.changeArc, 'changeArc', { 'fill-opacity': 0 });\r\n    }\r\n    this.valueElem = this.drawArc(svg, this.valueArc, 'valueArc', { 'fill': this.options.barColor });\r\n    let cursor = 'pointer';\r\n    if (this.options.readOnly) {\r\n      cursor = 'default';\r\n    }\r\n    this.drawArc(svg, this.interactArc, 'interactArc', { 'fill-opacity': 0, 'cursor': cursor }, clickInteraction, dragBehavior);\r\n  }\r\n  /**\r\n   *   Draw knob component\r\n   */\r\n  draw() {\r\n    d3.select(this.element).select('svg').remove();\r\n    const that = this;\r\n\r\n    that.createArcs();\r\n\r\n    const dragBehavior = d3.drag()\r\n      .on('drag', dragInteraction)\r\n      .on('end', clickInteraction);\r\n\r\n    that.drawArcs(clickInteraction, dragBehavior);\r\n\r\n    if (that.options.animate.enabled) {\r\n      // that.valueElem.transition().ease(that.options.animate.ease).duration(that.options.animate.duration).tween('', function () {\r\n      that.valueElem.transition().ease(that.animations[that.options.animate.ease]).duration(that.options.animate.duration).tween('', function () {\r\n        const i = d3.interpolate(that.valueToRadians(that.options.startAngle, 360), that.valueToRadians(that.value, that.options.max, that.options.endAngle, that.options.startAngle, that.options.min));\r\n        return function (t: any) {\r\n          const val = i(t);\r\n          that.valueElem.attr('d', that.valueArc.endAngle(val));\r\n          that.changeElem.attr('d', that.changeArc.endAngle(val));\r\n        };\r\n      });\r\n    } else {\r\n      that.changeArc.endAngle(this.valueToRadians(this.value, this.options.max, this.options.endAngle, this.options.startAngle, this.options.min));\r\n      that.changeElem.attr('d', that.changeArc);\r\n      that.valueArc.endAngle(this.valueToRadians(this.value, this.options.max, this.options.endAngle, this.options.startAngle, this.options.min));\r\n      that.valueElem.attr('d', that.valueArc);\r\n    }\r\n\r\n    function dragInteraction() {\r\n      that.inDrag = true;\r\n      const x = d3.event.x - (that.options.size / 2);\r\n      const y = d3.event.y - (that.options.size / 2);\r\n      interaction(x, y, false);\r\n    }\r\n\r\n    function clickInteraction() {\r\n      that.inDrag = false;\r\n      const coords = d3.mouse(this.parentNode);\r\n      const x = coords[0] - (that.options.size / 2);\r\n      const y = coords[1] - (that.options.size / 2);\r\n      interaction(x, y, true);\r\n    }\r\n\r\n    function interaction(x: any, y: any, isFinal: any) {\r\n      const arc = Math.atan(y / x) / (Math.PI / 180);\r\n      let delta;\r\n\r\n      if ((x >= 0 && y <= 0) || (x >= 0 && y >= 0)) {\r\n        delta = 90;\r\n      } else {\r\n        delta = 270;\r\n        if (that.options.startAngle < 0) {\r\n          delta = -90;\r\n        }\r\n      }\r\n\r\n      const radians = (delta + arc) * (Math.PI / 180);\r\n      that.value = that.radiansToValue(radians, that.options.max, that.options.min, that.options.endAngle, that.options.startAngle);\r\n      if (that.value >= that.options.min && that.value <= that.options.max) {\r\n        that.value = Math.round(((~~(((that.value < 0) ? -0.5 : 0.5) + (that.value / that.options.step))) * that.options.step) * 100) / 100;\r\n        if (that.options.step < 1) {\r\n          that.value = Number(that.value.toFixed(1));\r\n        }\r\n        that.valueArc.endAngle(that.valueToRadians(that.value, that.options.max, that.options.endAngle, that.options.startAngle, that.options.min));\r\n        that.valueElem.attr('d', that.valueArc);\r\n        if (isFinal) {\r\n          that.changeArc.endAngle(that.valueToRadians(that.value, that.options.max, that.options.endAngle, that.options.startAngle, that.options.min));\r\n          that.changeElem.attr('d', that.changeArc);\r\n        }\r\n        if (that.options.displayInput) {\r\n          let v = that.label || that.value;\r\n          if (typeof that.options.inputFormatter === 'function') {\r\n            v = that.options.inputFormatter(v);\r\n          }\r\n          d3.select(that.element).select('#text').text(v + that.options.unit || '');\r\n        }\r\n      }\r\n      that.valueChange.emit(that.value);\r\n    }\r\n  }\r\n  /**\r\n   *   Set a value\r\n   */\r\n  setValue(newValue: any) {\r\n    if ((!this.inDrag) && this.value >= this.options.min && this.value <= this.options.max) {\r\n      const radians = this.valueToRadians(newValue, this.options.max, this.options.endAngle, this.options.startAngle, this.options.min);\r\n      this.value = Math.round(((~~(((newValue < 0) ? -0.5 : 0.5) + (newValue / this.options.step))) * this.options.step) * 100) / 100;\r\n      if (this.options.step < 1) {\r\n        this.value = Number(this.value.toFixed(1));\r\n      }\r\n      this.changeArc.endAngle(radians);\r\n      d3.select(this.element).select('#changeArc').attr('d', this.changeArc);\r\n      this.valueArc.endAngle(radians);\r\n      d3.select(this.element).select('#valueArc').attr('d', this.valueArc);\r\n      if (this.options.displayInput) {\r\n        let v = this.label || this.value;\r\n        if (typeof this.options.inputFormatter === 'function') {\r\n          v = this.options.inputFormatter(v);\r\n        }\r\n        d3.select(this.element).select('#text').text(v + this.options.unit || '');\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {Ng2KnobDirective} from './angular2-knob.directive';\r\n\r\n@NgModule({\r\n    exports: [Ng2KnobDirective],\r\n    declarations: [Ng2KnobDirective]\r\n})\r\nexport class KnobModule { }\r\n\r\n"],"names":["d3.easeLinear","d3.easeBounce","arc","d3.arc","drag","d3.select","d3.range","d3.drag","d3.interpolate","d3.event","d3.mouse"],"mappings":"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"}